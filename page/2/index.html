<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>小蛋糕</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="小蛋糕">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="小蛋糕">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="wk">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="小蛋糕" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">小蛋糕</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-路由原理" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/03/07/%E8%B7%AF%E7%94%B1%E5%8E%9F%E7%90%86/" class="article-date">
  <time class="dt-published" datetime="2023-03-07T01:55:58.219Z" itemprop="datePublished">2023-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="路由原理"><a href="#路由原理" class="headerlink" title="路由原理"></a>路由原理</h1><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230126141123325.png" alt="image-20230126141123325" style="zoom: 67%;" />

<p>路由：路由器为IP包选择路径的过程（路由表，就像mac地址表）</p>
<img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230126174022851.png" alt="image-20230126174022851" style="zoom:67%;" />

<img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230126174047156.png" alt="image-20230126174047156" style="zoom:67%;" />

<img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230126180509571.png" alt="image-20230126180509571" style="zoom:67%;" />

<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230126190710701.png" alt="image-20230126190710701"></p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230126190730803.png" alt="image-20230126190730803"></p>
<h3 id="静态路由（S）"><a href="#静态路由（S）" class="headerlink" title="静态路由（S）"></a>静态路由（S）</h3><p>由管理员手工配置的，是单向的</p>
<p>缺乏灵活性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Router(config)# ip route 目标网段 子网掩码 下一跳ip</span><br><span class="line">ip route 70.1.1.0 255.255.255.0 20.1.1.2</span><br></pre></td></tr></table></figure>

<h3 id="默认路由"><a href="#默认路由" class="headerlink" title="默认路由"></a>默认路由</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Router(config)# ip route 0.0.0.0 0.0.0.0 下一跳ip</span><br><span class="line">ip route 70.1.1.0 255.255.255.0 20.1.1.2</span><br></pre></td></tr></table></figure>

<h3 id="浮动路由"><a href="#浮动路由" class="headerlink" title="浮动路由"></a>浮动路由</h3><p>在静态或默认路由后加空格+数字（正整数）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip route 0.0.0.0 0.0.0.0 20.1.1.2</span><br><span class="line">ip route 0.0.0.0 0.0.0.0 20.1.1.2 2</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">do sh ip route 查看路由表</span><br></pre></td></tr></table></figure>

<h2 id="交换与路由对比"><a href="#交换与路由对比" class="headerlink" title="交换与路由对比"></a>交换与路由对比</h2><p>路由工作在网络层</p>
<ol>
<li>根据“路由表”转发数据</li>
<li>路由选择</li>
<li>路由转发</li>
<li>ip包头导游</li>
</ol>
<p>交换工作在数据链路层</p>
<ol>
<li>根据“MAC地址表”转发数据</li>
<li>硬件转发</li>
<li>帧头导游</li>
</ol>
<h2 id="路由器的工作原理"><a href="#路由器的工作原理" class="headerlink" title="路由器的工作原理"></a>路由器的工作原理</h2><p>1）一个帧到达路由，路由器首先检查目标MAC地址是否自己（广播要解开看看，这里不提），如果不是则丢弃，如果是则解封装并将ip包（345层）送到路由器内部</p>
<p>2）路由器检查IP包头中的目标IP，并匹配路由表，如果匹配失败则丢弃，并向源IP回馈错误信息，如匹配成功，则将IP包路由到出接口</p>
<p>3）封装帧，首先将出接口的MAC地址作为源MAC封装好，然后检查ARP缓存表，检查是否有下一跳的MAC地址，如有，将提取并作为目标MAC地址封装到帧中，如没有，则发送ARP广播请求下一跳的MAC。并获取到对方的mac地址，再记录缓存，并封装帧，最后将帧发送出去。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/03/07/%E8%B7%AF%E7%94%B1%E5%8E%9F%E7%90%86/" data-id="clexlpz5c000oycvf2wsshsxh" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-防火墙" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/03/07/%E9%98%B2%E7%81%AB%E5%A2%99/" class="article-date">
  <time class="dt-published" datetime="2023-03-07T01:55:58.219Z" itemprop="datePublished">2023-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h1><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>隔离网络：将需要保护的网络与不可信任网络进行隔离，隐藏信息并进行安全防护</p>
<p>（路由配通了，防火墙默认不允许任何流量经过，路由器则相反）</p>
<p>基本功能：访问控制，攻击防护，冗余设计，路由、 交换，日志记录，虚拟专网VPN，NAT</p>
<h2 id="区域隔离"><a href="#区域隔离" class="headerlink" title="区域隔离"></a>区域隔离</h2><p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230226150014332.png" alt="image-20230226150014332"></p>
<p>waf-web应用防火墙</p>
<p>ips-入侵防御系统（放在串联上，一个个查，牺牲性能）</p>
<p>ids-入侵检测系统（不防，不影响网络性能，并联的感觉）</p>
<h2 id="防火墙的分类"><a href="#防火墙的分类" class="headerlink" title="防火墙的分类"></a>防火墙的分类</h2><p>按防火墙形态</p>
<p>​	1.软件防火墙</p>
<p>​	2.硬件防火墙</p>
<p>按技术实现</p>
<p>​	1.包过滤防火墙</p>
<p>​	2.状态检测包过滤防火墙</p>
<p>​	3.应用（代理）防火墙</p>
<p>​	4.WAF防火墙</p>
<p>​	5.应用层防火墙</p>
<h3 id="防火墙的发展历史"><a href="#防火墙的发展历史" class="headerlink" title="防火墙的发展历史"></a>防火墙的发展历史</h3><p>​	<strong>包过滤防火墙</strong>（已淘汰）：最早的防火墙技术之一，功能简单，配置复杂（无法检测是否是回包）</p>
<p>​	应用网关&#x2F;应用代理防火墙：最早的防火墙技术之二，连接效率低，速度慢</p>
<p>​		每一个代理需要一个不同的应用进程，或一个后台运行的服务程序，对每个新的应用必须添加针对此应用的服务程序，否则不能使用该服务</p>
<p>​		优点：安全性高，检测内容</p>
<p>​		缺点：连接性能差，可伸缩性差（很多服务代理不了）</p>
<p>​	<strong>状态检测防火墙</strong>：现代主流防火墙，速度快，配置方便，功能较多。（会话状态维持60s，能检查回包）（很像之前那个CEF表）</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230226154821772.png" alt="image-20230226154821772"></p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230226155550605.png" alt="image-20230226155550605"></p>
<p>​	DPI防火墙：未来防火墙的发展方向，能够高速的对第七层数据进行检测</p>
<h3 id="衡量防火墙性能的5大指标"><a href="#衡量防火墙性能的5大指标" class="headerlink" title="衡量防火墙性能的5大指标"></a>衡量防火墙性能的5大指标</h3><p>1、吞吐量：在不丢包的情况单位时间内通过的数据包数量</p>
<p>2、时延：数据包第一个比特进入防火墙到最后一比特从防火墙输出的时间间隔</p>
<p>3、丢包率：通过防火墙传送时所丢失数据包数量占所发送数据包的比率</p>
<p>4、并发连接数：防火墙能够同时处理的点对点连接的最大数目（更关心） </p>
<p>5、新建连接数：在不丢包的情况下每秒可以建立的最大连接数</p>
<h2 id="防火墙的工作模式"><a href="#防火墙的工作模式" class="headerlink" title="防火墙的工作模式"></a>防火墙的工作模式</h2><p>标准应用</p>
<p>1、透明模式</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230226160057085.png" alt="image-20230226160057085"></p>
<p>透明模式&#x2F;桥模式一般用于用户网络已经建设完毕，网络功能基本已经实现的情况下，用户需要加装防火墙以实现安全区域隔离的要求</p>
<p>一般将网络分为内部网、DMZ区和外部网</p>
<p>2、路由模式</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230226160401785.png" alt="image-20230226160401785"></p>
<p>3、混杂模式</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230226160806988.png" alt="image-20230226160806988"></p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230226161228803.png" alt="image-20230226161228803"></p>
<h2 id="实验"><a href="#实验" class="headerlink" title="实验"></a>实验</h2><p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230226161322727.png" alt="image-20230226161322727"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/03/07/%E9%98%B2%E7%81%AB%E5%A2%99/" data-id="clexlpz5d000pycvfd9gr60co" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-NTFS安全权限" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/03/07/NTFS%E5%AE%89%E5%85%A8%E6%9D%83%E9%99%90/" class="article-date">
  <time class="dt-published" datetime="2023-03-07T01:55:58.203Z" itemprop="datePublished">2023-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="NTFS安全权限"><a href="#NTFS安全权限" class="headerlink" title="NTFS安全权限"></a>NTFS安全权限</h3><h4 id="NTFS权限概述"><a href="#NTFS权限概述" class="headerlink" title="NTFS权限概述"></a>NTFS权限概述</h4><p>1、通过设置NTFS权限，实现不同的用户访问不同的对象的权限</p>
<p>2、分配了正确的访问权限后，用户才能访问其资源</p>
<p>3、设置权限防止资源被篡改、删除</p>
<h4 id="文件系统概述"><a href="#文件系统概述" class="headerlink" title="文件系统概述"></a>文件系统概述</h4><p>文件系统即在外部存储设备上组织文件的方法</p>
<p>常用的文件系统：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FAT		windows</span><br><span class="line">NTFS	 windows</span><br><span class="line">EXT 	linux常见</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">特点：</span><br><span class="line">1.提高磁盘读写性能</span><br><span class="line">2.可靠性</span><br><span class="line">	加密文件系统</span><br><span class="line">	访问控制列表（设置权限）</span><br><span class="line">3.磁盘利用率</span><br><span class="line">	压缩</span><br><span class="line">	磁盘配额（对不同的用户设置不同的配额）</span><br><span class="line">4支持单个文件大于4个G</span><br></pre></td></tr></table></figure>

<h4 id="修改NTFS权限"><a href="#修改NTFS权限" class="headerlink" title="修改NTFS权限"></a>修改NTFS权限</h4><p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20221207151813485.png" alt="image-20221207151813485"></p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20221207151823267.png" alt="image-20221207151823267"></p>
<h5 id="继承父目录的权限"><a href="#继承父目录的权限" class="headerlink" title="继承父目录的权限"></a>继承父目录的权限</h5><p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20221207151930396.png" alt="image-20221207151930396"></p>
<h5 id="权限累加"><a href="#权限累加" class="headerlink" title="权限累加"></a>权限累加</h5><p>当用户同时属于多个组时，权限是累加的（累加只累加允许，拒绝最大）</p>
<h5 id="取得所有权"><a href="#取得所有权" class="headerlink" title="取得所有权"></a>取得所有权</h5><p>可以将任何文件夹的所有者改为administrator</p>
<h5 id="文件复制"><a href="#文件复制" class="headerlink" title="文件复制"></a>文件复制</h5><p>文件复制后，文件的权限会被目标文件的权限覆盖，唯一不覆盖是同分区移动</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/03/07/NTFS%E5%AE%89%E5%85%A8%E6%9D%83%E9%99%90/" data-id="clexlpz510006ycvfgetpf1js" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-PKI" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/03/07/PKI/" class="article-date">
  <time class="dt-published" datetime="2023-03-07T01:55:58.203Z" itemprop="datePublished">2023-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="PKI证书系统"><a href="#PKI证书系统" class="headerlink" title="PKI证书系统"></a>PKI证书系统</h1><h2 id="1-散列函数"><a href="#1-散列函数" class="headerlink" title="1.散列函数"></a>1.散列函数</h2><p>散列函数也叫做HASH函数，主流的散列算法有MD5与SHA-1。散列函数的主要任务是验证数据的完整性。通过散列函数计算得到的结果叫做散列值，这个散列值也常常被称为数据的指纹（Fingerprint）</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230108225659648.png" alt="image-20230108225659648"></p>
<h3 id="四大特点"><a href="#四大特点" class="headerlink" title="四大特点"></a>四大特点</h3><ol>
<li>固定大小</li>
<li>雪崩效应</li>
<li>单向</li>
<li>冲突避免</li>
</ol>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230108225900489.png" alt="image-20230108225900489"></p>
<h2 id="对称与非对称密钥算法"><a href="#对称与非对称密钥算法" class="headerlink" title="对称与非对称密钥算法"></a>对称与非对称密钥算法</h2><h3 id="对称密钥算法"><a href="#对称密钥算法" class="headerlink" title="对称密钥算法"></a>对称密钥算法</h3><p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230108230059597.png" alt="image-20230108230059597"></p>
<p>优点：1.速度快	2.安全	3.紧凑</p>
<p>缺点：1.明文传输共享密钥，容易出现中途劫持和窃听的问题</p>
<p>​			2.随着参与者数量的增加，密钥数量急剧膨胀((n*(n-1))&#x2F;2)</p>
<p>​			3.因为密钥数量过多，对密钥的管理和存储是一个很大的问题</p>
<p>​			4.不支持数字签名和不可否认性</p>
<h3 id="非对称密钥算法"><a href="#非对称密钥算法" class="headerlink" title="非对称密钥算法"></a>非对称密钥算法</h3><p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230108230419813.png" alt="image-20230108230419813"></p>
<p>​	非对称密钥算法的主流协议为RSA,需要每一个参与者产生一对密钥。共享公钥到服务器，严格保障私钥的安全性。根据这种操作的特点，也被称作公共密钥系统。</p>
<p>优点：</p>
<ol>
<li>安全</li>
<li>由于不必担心交换的公钥被劫持，所以非对称密钥的分发更安全</li>
<li>密钥数目和参与者数目相同</li>
<li>在交换公钥之前不需要预先建立某种信任关系</li>
<li>支持数字签名和不可否认性</li>
</ol>
<p>缺点：1.加密速度很慢	2.密文会变长</p>
<img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230108231036901.png" alt="image-20230108231036901" style="zoom: 50%;" />

<img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230108231212827.png" alt="image-20230108231212827" style="zoom: 50%;" />

<h2 id="数字签名"><a href="#数字签名" class="headerlink" title="数字签名"></a>数字签名</h2><p>工作示意图</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230108232313543.png" alt="image-20230108232313543"></p>
<p>运用</p>
<ol>
<li>驱动程序签名</li>
<li>PDF签名</li>
<li>IPSec VPN数字签名认证</li>
</ol>
<h3 id="密钥管理面临的挑战"><a href="#密钥管理面临的挑战" class="headerlink" title="密钥管理面临的挑战"></a>密钥管理面临的挑战</h3><p>在使用任何基于RSA服务之前，一个实体需要真实可靠的获取其他实体的公钥</p>
<ol>
<li>通过非信任的通道，公钥交换必须是安全的。</li>
<li>在密钥交换的过程中，公钥必须不能够被截获和更改。</li>
<li>交换呈现Full Mesh的复杂度。</li>
<li>由最终用户来确认密钥有效性，非常不靠谱</li>
</ol>
<img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230108232800101.png" alt="image-20230108232800101" style="zoom:50%;" />

<h3 id="受信任的介绍"><a href="#受信任的介绍" class="headerlink" title="受信任的介绍"></a>受信任的介绍</h3><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230108232934995.png" alt="image-20230108232934995" style="zoom:50%;" />

<img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230108232946350.png" alt="image-20230108232946350" style="zoom:50%;" />

<h2 id="证书授权颁发机构（CA）"><a href="#证书授权颁发机构（CA）" class="headerlink" title="证书授权颁发机构（CA）"></a>证书授权颁发机构（CA）</h2><p>PKI（公钥基础设施&#x2F;公共密钥底层架构）</p>
<p>PKI继承了这个概念并使其具有可扩展性：</p>
<ol>
<li>仅仅只有一个受信任的介绍者（证书颁发机构）</li>
<li>CA签署每一个人的公钥</li>
<li>每个人都拥有CA的公钥</li>
</ol>
<p>继：</p>
<ol>
<li>每个实体都要获取CA的公钥（认证CA的过程）</li>
<li>每个实体都要提交自己的公钥给CA（注册到CA）</li>
<li>这个初始步骤，必须手动认证或通过一个可信赖的传输网络来执行</li>
</ol>
<img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230109160756504.png" alt="image-20230109160756504" style="zoom:50%;" />

<img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230109160810351.png" alt="image-20230109160810351" style="zoom:50%;" />

<ol>
<li>实体现在就可以通过非信任的网络来彼此交换被（CA）签了名的公钥了</li>
<li>收到的公钥都是被CA的公钥所确认的，CA的公钥在每一个实体本地必须是有效的</li>
</ol>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230109161010855.png" alt="image-20230109161010855"></p>
<h2 id="证书申请步骤"><a href="#证书申请步骤" class="headerlink" title="证书申请步骤"></a>证书申请步骤</h2><h3 id="第一步：同步时间"><a href="#第一步：同步时间" class="headerlink" title="第一步：同步时间"></a>第一步：同步时间</h3><p>时间是整个PKI系统的重中之重，必须要先确保参加PKI系统的设备和主机的时间同步。才能开始PKI的部署。</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230109161232691.png" alt="image-20230109161232691"></p>
<h3 id="第二步：部署证书服务器"><a href="#第二步：部署证书服务器" class="headerlink" title="第二步：部署证书服务器"></a>第二步：部署证书服务器</h3><p>证书服务器是整个PKI系统的核心，我们可以选择Cisco IOS或者微软的证书服务器。</p>
<h3 id="第三步：客户端产生密钥"><a href="#第三步：客户端产生密钥" class="headerlink" title="第三步：客户端产生密钥"></a>第三步：客户端产生密钥</h3><p>每一个实体在申请证书之前，需要预先产生RSA的密钥对。</p>
<h3 id="第四步：验证证书服务器"><a href="#第四步：验证证书服务器" class="headerlink" title="第四步：验证证书服务器"></a>第四步：验证证书服务器</h3><p>每一个实体需要获取证书服务器的根证书，里包含证书服务器的公钥，获取了根证书后，可以通过fingerprint离线验证证书服务器。</p>
<h3 id="第五步：申请个人证书"><a href="#第五步：申请个人证书" class="headerlink" title="第五步：申请个人证书"></a>第五步：申请个人证书</h3><p>每一个实体发送自己的个人信息和公钥到证书服务器</p>
<h3 id="第六步：审核并签名证书"><a href="#第六步：审核并签名证书" class="headerlink" title="第六步：审核并签名证书"></a>第六步：审核并签名证书</h3><p>管理员对每一个证书请求进行审核，并且对个人信息和公钥内容进行数字签名，签名后的文件即为数字证书。</p>
<h3 id="第七步：颁发数字证书"><a href="#第七步：颁发数字证书" class="headerlink" title="第七步：颁发数字证书"></a>第七步：颁发数字证书</h3><p>证书服务器把签名的证书颁发给实体。</p>
<h3 id="第八步：交换公钥"><a href="#第八步：交换公钥" class="headerlink" title="第八步：交换公钥"></a>第八步：交换公钥</h3><p>交换证书，证明实体与公钥之间的关联，公钥的具体作用由运用来决定。</p>
<h2 id="证书申请与吊销"><a href="#证书申请与吊销" class="headerlink" title="证书申请与吊销"></a>证书申请与吊销</h2><p>证书申请方式：</p>
<p>1.SCEP (Simple Certificate Enrollment Protocol)for VPN devices</p>
<p>2.File-based (PKCS#10)</p>
<p>3.Web-based(browser-to-CA)</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230109161947728.png" alt="image-20230109161947728"></p>
<p>证书吊销方式：</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230109162129643.png" alt="image-20230109162129643"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/03/07/PKI/" data-id="clexlpz530009ycvfekln3p02" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-VLAN(Virtual LAN)虚拟局域网" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/03/07/VLAN(Virtual%20LAN)%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91/" class="article-date">
  <time class="dt-published" datetime="2023-03-07T01:55:58.203Z" itemprop="datePublished">2023-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="VLAN-Virtual-LAN-虚拟局域网"><a href="#VLAN-Virtual-LAN-虚拟局域网" class="headerlink" title="VLAN(Virtual LAN)虚拟局域网"></a>VLAN(Virtual LAN)虚拟局域网</h1><p>1.广播&#x2F;广播域</p>
<p>2.广播的危害：</p>
<p>增加网络&#x2F;终端负担，传播病毒，安全性</p>
<p>3.如何控制广播</p>
<p>控制广播&#x3D;隔离广播域</p>
<p>路由器隔离广播（物理隔离广播）</p>
<p>路由器隔离广播缺点：成本高、不灵活</p>
<p>4.采用新的技术VLAN来控制广播，VLAN技术是在交换机上实现的，且是通过逻辑隔离划分的广播域</p>
<p>5.一个VLAN&#x3D;一个广播域&#x3D;一个网段</p>
<p>vlan是二层技术</p>
<p>6.VLAN的类型：</p>
<p> 1）静态VLAN</p>
<p>​		*手工配置</p>
<p>​		*基于端口划分的VLAN</p>
<p> 2）动态VLAN</p>
<p>​		*手工配置</p>
<p>​		*基于MAC地址划分的VLAN（现在差不多淘汰了，取而代之是采用802.1x端口认证，基于账号来划分vlan</p>
<p>7.静态VLAN命令：</p>
<p>创建vlan</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conf t</span><br><span class="line">	vlan ID,ID,ID-ID</span><br><span class="line">	[name 自定义名称]</span><br></pre></td></tr></table></figure>

<p>查看vlan表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">do show vlan brief</span><br></pre></td></tr></table></figure>

<p>将端口加入到VLAN</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int f0/x</span><br><span class="line">	switchport access vlan ID</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230131095401575.png" alt="image-20230131095401575"></p>
<p>一般默认5个vlan</p>
<p>二、<strong>trunk</strong></p>
<p>1.trunk&#x2F;中继链路&#x2F;公共链路</p>
<p>作用：允许所有VLAN数据通过trunk链路</p>
<p>方法：通过在数据帧上加标签，来区分不同的vlan的数据</p>
<p>2.trunk标签：</p>
<p>1）ISL标签：cisco私有的，标签大小30字节26+4（头26尾4）</p>
<p>2）802.1q标签：公有协议，所有厂家都支持，标签大小4字节。属于内部标签。（加中间的）</p>
<p>3.交换机端口链路类型：</p>
<p>1）接入端口：也称为access端口哦，一般用于连接pc，只能属于某一个vlan，也只能传输一个vlan的数据</p>
<p>2）中继端口：也成为trunk端口，一般用于连接其他交换机，属于公共端口，允许所有vlan的数据通过！（vlan表里会隐藏）</p>
<p>4.配置trunk命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">int f0/x</span><br><span class="line">	[switchport trunk encapsulation dot1q/isl]</span><br><span class="line">	switchport mode access/trunk</span><br><span class="line">	exit</span><br></pre></td></tr></table></figure>

<p>交换机的工作原理（配置了vlan和trunk后）</p>
<h1 id="单臂路由"><a href="#单臂路由" class="headerlink" title="单臂路由"></a>单臂路由</h1><p>1.VLAN控制广播域</p>
<p>2.不同的vlan间无法通信</p>
<p>3.一个vlan&#x3D;一个网段</p>
<p>如vlan10 – IT –10.1.1.0&#x2F;24</p>
<p>​	vlan20 – cw –20.1.1.0&#x2F;24</p>
<p>4.不同vlan间通信时靠路由来实现的</p>
<img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230201171856322.png" alt="image-20230201171856322" style="zoom: 67%;" />

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">conf t</span><br><span class="line">int f0/0.1</span><br><span class="line">encapsulation dot1q 10</span><br><span class="line">ip add 10.1.1.254 255.255.255.0</span><br><span class="line">no shut </span><br><span class="line">exit</span><br><span class="line"></span><br><span class="line">int f0/0.2</span><br><span class="line">encapsulation dot1q 20</span><br><span class="line">ip add 20.1.1.254 255.255.255.0</span><br><span class="line">no shut</span><br><span class="line">exit</span><br><span class="line"></span><br><span class="line">int f0/0</span><br><span class="line">no shut</span><br></pre></td></tr></table></figure>

<p> 给路由器配dhcp</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">conf t</span><br><span class="line">ip dhcp excluded-address 10.1.1.1 10.1.1.99</span><br><span class="line">ip dhcp pool v10</span><br><span class="line">network 10.1.1.0 255.255.255.0</span><br><span class="line">default-router 10.1.1.254</span><br><span class="line">dns-server 40.1.1.1</span><br><span class="line">lease 2 2 2  //软件不支持 ，租约 天 小时 分</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">no ip dhcp excluded-address 10.1.1.1 10.1.1.99</span><br><span class="line">no ip dhcp excluded-address 20.1.1.1 20.1.1.99</span><br><span class="line">no ip dhcp excluded-address 30.1.1.1 30.1.1.99</span><br><span class="line">no ip dhcp pool v10</span><br><span class="line">no ip dhcp pool v20</span><br><span class="line">no ip dhcp pool v30</span><br></pre></td></tr></table></figure>

<p>路由器DHCP中继(跨网段获取地址，最多跨两网段)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int f0/0.3</span><br><span class="line">ip helper-address 40.1.1.1</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>

<h2 id="单臂路由缺点"><a href="#单臂路由缺点" class="headerlink" title="单臂路由缺点"></a>单臂路由缺点</h2><p>1.网络瓶颈</p>
<p>2.容易发生单点物理故障（所有的子接口依赖于总物理接口）</p>
<p>3.VLAN间通信的每一个数据帧度进行单独路由</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vtp domain 名字</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/03/07/VLAN(Virtual%20LAN)%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91/" data-id="clexlpz54000aycvf46ii8qhn" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-VPN" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/03/07/VPN/" class="article-date">
  <time class="dt-published" datetime="2023-03-07T01:55:58.203Z" itemprop="datePublished">2023-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="VPN"><a href="#VPN" class="headerlink" title="VPN"></a>VPN</h1><p>1.VPN（Virtual Private Network）</p>
<p>​	虚拟专有网络</p>
<p>​	虚拟专网</p>
<p>2.引入</p>
<p>​	VPN可以实现在不安全的网络上，安全的传输数据，好像专网；VPN只是一个技术，使用PKI技术，来保证数据的安全三要素</p>
<p>3.安全三要素：</p>
<p>​	1）机密性</p>
<p>​	2）完整性</p>
<p>​	3）身份验证</p>
<p>4.加密技术：</p>
<p>​	1）对称加密：加密与解密使用相同的密钥</p>
<p>​							 密钥是通信双方协商生成，生成过程是明文通信</p>
<p>​	2）非对称加密算法：使用公私钥加密数据</p>
<p>​										 公私钥成对生成，互为加解密关系</p>
<p>​										 公私钥不能互相推算</p>
<p>​										 双方交换公钥</p>
<p>​										 使用对方的公钥加密实现机密性</p>
<p>​										 使用自己的私钥进行签名，实现身份验证</p>
<p>5.完整性算法&#x2F;hash值算法：</p>
<p>​	MD5</p>
<p>​	SHA</p>
<p>6.VPN的类型：</p>
<p>​	1）远程访问VPN</p>
<p>​				一般用在个人到安全连接企业内部</p>
<p>​				一般出差员工&#x2F;在家办公，安全连接内网时使用</p>
<p>​				一般公司部署VPN服务器，员工在外拨号连接VPN即可</p>
<p>​				常见RA-VPN协议：PPTP VPN、L2TP VPN、SSTP VPN</p>
<p>​													EZvpn&#x2F;easyvpn、SSL VPN</p>
<p>​	2）点到点VPN</p>
<p>​				一般用在企业对企业安全连接	</p>
<p>​				一般需要在两个企业总出口设备之间建立VPN通道</p>
<p>​				常见的点到点VPN：IPsecVPN</p>
<p>7.IPsecVPN：</p>
<p>​	1）属于点到点VPN，可以在2家企业之间建立VPN隧道</p>
<p>​	2）VPN隧道优点：安全性</p>
<p>​									 合并两家企业内网</p>
<p>​	3）VPN隧道技术：</p>
<p>​			1）传输模式：只加密上层数据，不加密私有IP包头，速度款</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230215192702667.png" alt="image-20230215192702667"></p>
<p>​			2）隧道模式：加密整个私有IP包，包括IP包头，更安全，速度慢</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230215192726954.png" alt="image-20230215192726954"></p>
<p>​	4）VPN隧道技术：重新封装技术+加密认证技术</p>
<p>​	5）IPsecVPN分为2大阶段：</p>
<p>​		第一阶段：管理连接</p>
<p>​		目的：通信双方设备通过非对称加密算法加密堆成加密算法所使用的对称密钥</p>
<p>​		命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">conf t   (IKE)</span><br><span class="line">crypto isakmp policy 1   （传输集/策略集）</span><br><span class="line">	encryption des/3des/aes</span><br><span class="line">	hash md5/sha</span><br><span class="line">	group 1/2/5</span><br><span class="line">	authentication pre-share</span><br><span class="line">	lifetime 秒			（默认86400秒/24小时）</span><br><span class="line">	exit</span><br><span class="line">crypto isakmp key 预共享密钥 address 对方的公网IP地址</span><br></pre></td></tr></table></figure>

<p>​		第二阶段：数据连接</p>
<p>​		目的：通过对称加密算法加密实际所要传输的私网数据</p>
<p>定义VPN触发流量：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">access-list 100 permit ip 192.168.0.0 0.0.255.255 172.16.0.0 0.0.255.255</span><br></pre></td></tr></table></figure>

<p>定义加密方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crypto ipsec transform-set 传输模式名  esp/ah-des/3des/aes esp/ah-md5/sha-hmac</span><br></pre></td></tr></table></figure>

<p>ESP：支持加密及认证（身份验证+完整性）</p>
<p>AH：只支持认证（身份验证+完整性）</p>
<p>创建MAP映射表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">conf t</span><br><span class="line">crypto map map名 1 ipsec-isakmp</span><br><span class="line">	match address 100</span><br><span class="line">	set transform-set 传输模式名</span><br><span class="line">	set peer 对方的公网IP</span><br><span class="line">	exit</span><br></pre></td></tr></table></figure>

<p>例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">conf t</span><br><span class="line">crypto map wenmap 1 ipsec-isakmp</span><br><span class="line">	match address 100</span><br><span class="line">	set transform-set wentran</span><br><span class="line">	set peer 200.1.1.2</span><br><span class="line">	exit</span><br><span class="line">crypto map wenmap 2 ipsec-isakmp</span><br><span class="line">	match address 101</span><br><span class="line">	set transform-set wentran</span><br><span class="line">	set peer 150.1.1.2</span><br><span class="line">	exit</span><br></pre></td></tr></table></figure>

<p>将map表应用到外网端口“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int f0/1（外网端口）</span><br><span class="line">	crypto map map名</span><br><span class="line">	exit</span><br></pre></td></tr></table></figure>

<p>****注意：一个接口只能应用一个map表</p>
<p>8.查看命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">show crypto isakmp sa 查看第一阶段状态</span><br><span class="line">show crypto ipsec sa 查看第二阶段状态</span><br><span class="line">show crypto isakmp policy 查看第一阶段的策略配置集</span><br><span class="line">show crypto ipsec transform-set 查看第二阶段的策略配置集</span><br></pre></td></tr></table></figure>

<p>9.路由器的工作原理：</p>
<p>内网–to–外网：路由–NAT–VPN-出去</p>
<p>在ACL表上做相关配置</p>
<p>10.远程访问VPN：</p>
<p>ssl vpn不止提供vpn还提供网页服务，即可以通过浏览器使用服务</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230226143831520.png" alt="image-20230226143831520"></p>
<p>vpn网关：tcp1723</p>
<p>端口打开+账号（身份验证）+配地址+nat（200.1）（v1国内）+新建一个vpn连接（软件）</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230226144524462.png" alt="image-20230226144524462"></p>
<p>一块网卡就够了</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230226144845095.png" alt="image-20230226144845095"></p>
<p>访问同网段还是优先直连，访问其他一律都是隧道</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/03/07/VPN/" data-id="clexlpz55000bycvfb16nc13x" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-WEB服务器" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/03/07/WEB%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="article-date">
  <time class="dt-published" datetime="2023-03-07T01:55:58.203Z" itemprop="datePublished">2023-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="WEB服务器"><a href="#WEB服务器" class="headerlink" title="WEB服务器"></a>WEB服务器</h1><p>1.WEB服务器也成为网页服务器或HTTP服务器</p>
<p>2.WEB服务器使用的协议是HTTP或HTTPS</p>
<p>3.HTTP协议端口号：TCP 80</p>
<p>​    HTTPS协议端口号：TCP 443</p>
<p>4.WEB服务器发布软件：</p>
<p>微软：IIS(internet imformation service)(可以发布web网站和FTP站点)</p>
<p>linue: Apache&#x2F;LAMP&#x2F;Tomcat&#x2F;nginx .etc</p>
<p>第三方：phpstudy、XAMPP</p>
<p>5.部署WEB服务器：</p>
<p>1)配置静态IP地址</p>
<p>2)安装IIS-WEB插件</p>
<p>3)停用默认站点</p>
<p>4)新建网站-地址端口绑定-指定站点路径-设置权限</p>
<p>5)设置默认文档(设置首页)</p>
<p>6.一台服务器同时发布多个web站点：</p>
<p>1)不同的IP，相同的端口</p>
<p>2)相同的IP，不同的端口</p>
<p>3)相同的IP，相同的端口，不同的域名（主机头）</p>
<p>7.网站类型：</p>
<p>1)静态网站：一般扩展名为.html或.htm</p>
<p>​	无后台数据库</p>
<p>2)动态网站：一般扩展名为.asp或.php</p>
<p>​	有后台数据库，asp或php可以连接前台页面与后台数据库</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/03/07/WEB%E6%9C%8D%E5%8A%A1%E5%99%A8/" data-id="clexlpz56000cycvf9ek01lox" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ICMP" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/03/07/ICMP/" class="article-date">
  <time class="dt-published" datetime="2023-03-07T01:55:58.188Z" itemprop="datePublished">2023-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="ICMP"><a href="#ICMP" class="headerlink" title="ICMP"></a>ICMP</h1><p>网络层 	IP	ARP	ICMP	</p>
<p>ICMP协议：</p>
<p>1.ICMP协议端口号是？ 没有端口号，只有协议号（TCP)</p>
<p>2.ICMP是干什么的</p>
<p>​	网络探测与回馈机制</p>
<p>​	1.网络探测</p>
<p>​	2.路由跟踪</p>
<p>​	3.错误反馈</p>
<p>ping只是ICMP中的一种，只要发生错误，任何设备有义务向别人发送ICMP回馈</p>
<p>ICMP协议的封装格式：</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230203192408867.png" alt="image-20230203192408867"></p>
<p>ICMP头：ICMP类型、代码（类型是3时，代码代表了不同种类的类型）</p>
<p>​	ICMP类型字段：</p>
<p>​		8：ping请求</p>
<p>​		0：ping应答</p>
<p>​		3：目标主机不可达（路由器给你道歉发的这个）</p>
<p>​		11：TTL超时</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/03/07/ICMP/" data-id="clexlpz520007ycvf2kw96l08" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-NAT" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/03/07/NAT/" class="article-date">
  <time class="dt-published" datetime="2023-03-07T01:55:58.188Z" itemprop="datePublished">2023-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h1><p>1.Network Address Translations</p>
<p>​	网络地址转换</p>
<p>2.ipv4地址严重不够用； </p>
<p>​	x.x.x.x x0-255</p>
<p>​	A B C类可以使用 D组播 E科研</p>
<p>3.IP地址分为公网IP和私网IP</p>
<p>​	公网IP只能在公网上使用</p>
<p>​	私网IP只能在内网中使用</p>
<p>​	公网上不允许出现私有IP地址</p>
<p>​	私网IP可以重复在内网使用</p>
<p>​	私有IP地址范围：</p>
<p>​	1）10.0.0.0&#x2F;8	（10开头的）</p>
<p>​	2）172.16.0.0&#x2F;16 - 172.31.0.0&#x2F;16</p>
<p>​		（172.16开头的一直到172.31开头的）</p>
<p>​	3）192.168.0.0&#x2F;16 （192.168开头的）</p>
<p>4.NAT主要实现公私有IP地址的转换，一般是路由器或者防火墙上来完成，不建议在三层交换机上配置</p>
<p>5.NAT有三大类：</p>
<p>​	1）静态NAT：一对一映射，（静态PAT，端口映射技术）</p>
<p>​	2）动态NAT（地址表24小时，所以没人用这个）</p>
<p>​	3）PAT（端口地址转换，Port Address Translations）</p>
<p>​			PAT也称为端口复用技术（地址表60s）</p>
<p>静态</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230213104456130.png" alt="image-20230213104456130"></p>
<p>动态</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230213104531004.png" alt="image-20230213104531004"></p>
<p>PAT</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230213104602542.png" alt="image-20230213104602542"></p>
<p>6.NAT命令：</p>
<p>​	1）定义内网端口：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int f0/0</span><br><span class="line">	ip nat inside</span><br><span class="line">	exit</span><br></pre></td></tr></table></figure>

<p>​	2）定义外网端口：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">int f0/1</span><br><span class="line">	ip nat outside</span><br><span class="line">	exit</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230213110724660.png" alt="image-20230213110724660"></p>
<p>​	3）配置PAT：</p>
<p>​		定义内部地址池：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acc 1 permit 192.168.0.0 0.0.255.255</span><br></pre></td></tr></table></figure>

<p>​		做PAT动态映射：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conf t</span><br><span class="line">ip nat inside source list 1 int f0/1 overload</span><br></pre></td></tr></table></figure>

<p>​	4）配置静态端口转换：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conf t</span><br><span class="line">ip nat inside source static tcp 192.168.1.3 80 100.1.1.2 80</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show ip nat translations</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/03/07/NAT/" data-id="clexlpz520008ycvf84x4cxka" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ip包头分析与静态路由" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/03/07/ip%E5%8C%85%E5%A4%B4%E5%88%86%E6%9E%90%E4%B8%8E%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/" class="article-date">
  <time class="dt-published" datetime="2023-03-07T01:55:58.188Z" itemprop="datePublished">2023-03-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="ip包头分析与静态路由"><a href="#ip包头分析与静态路由" class="headerlink" title="ip包头分析与静态路由"></a>ip包头分析与静态路由</h1><p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230125155746872.png" alt="image-20230125155746872"></p>
<p>IP包头大小：20~60字节	大多数都是固定20字节，可选项轻易不会被使用；ip包头相当于互联网里的导游</p>
<p><strong>版本</strong>：ipv4还是ipv6 (0100&#x2F;0110)</p>
<p><strong>首部长度</strong>：用来表明ip包头的长度，是否有设可选项，20-60，单位是4字节（15*4）</p>
<p><strong>优先级与服务类型</strong>：前3个bit代表优先级，后4个bit代表服务类型，最后一个bit未启用，保留。（运营商用的比较多）quality of  service,type of servict&#x2F;qos,tos</p>
<p><strong>总长度</strong>：和首部长度对应，表示ip包&#x2F;数据报文的长度，即345层</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230126133304575.png" alt="image-20230126133304575"></p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230126133906748.png" alt="image-20230126133906748"></p>
<p>上层来的数据到IP层会被分片</p>
<p><strong>标识符</strong>：标示id，发送端随机生成，将数据分类，谁是谁发的</p>
<p><strong>标志</strong>：第1个bit永远为0，未启用，第2个bit表示ip包是否进行分片，0表示这个包分片，1表示这个包未分片；第3个bit表明本分片是不是最后一个分片，1代表还有后续分片，0代表本分片是最后一个。</p>
<p>010未分片，此时16+13个bit全为0（标识符和段偏移量），000分片且是最后一个，001分片还有后续分片</p>
<p><strong>段偏移量</strong>：只有0，1480，2960……，用来决定每个分片的先后顺序</p>
<p>一些攻击：伪造些报文，001，001，000，断偏移量，0,&lt;1480,电脑重组数据失败，后来重组失败直接扔，后续持续发这种，让电脑一直在重组，属于ddos一种，采用防火墙，防火墙先重组，重组失败丢，但墙也会累，可以请运营商清洗流量，现在的防火墙检查标志位，中间为0一律不给过，分片在三层进行，现交给五层，推给软件（应用层），1460一个切片</p>
<p><strong>TTL</strong>：time to live，100以上一般都是windows，100一下一般都是linux，生命周期字段，经过一个路由器值减1，为0，路由器会丢弃数据包，为了避免一个数据包在网络上无限的循环下去，255比较特殊，代表网络设备</p>
<p><img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230126140607795.png" alt="image-20230126140607795"></p>
<p>设置特定ttl值的报文，1，2，3…让路由器给你道歉，看包头里的源ip</p>
<p><strong>协议号</strong>：类似于帧头里的类型字段，二层识别三层。协议号识别上层和同层，6走向tcp，17走向udp，1走向同层icmp</p>
<img src="C:\Users\wk428\AppData\Roaming\Typora\typora-user-images\image-20230126140201329.png" alt="image-20230126140201329" style="zoom:67%;" />

<p><strong>首部校验和</strong>：作用和帧尾的fcs相似，校验ip包头（20-60个字节）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/03/07/ip%E5%8C%85%E5%A4%B4%E5%88%86%E6%9E%90%E4%B8%8E%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/" data-id="clexlpz56000dycvfegiq2sf8" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/03/07/%E5%9F%9F/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/03/07/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%882%E5%B1%82%20Data%20Link%20Layer%EF%BC%89/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/03/07/%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%88cifs%E5%8D%8F%E8%AE%AE%EF%BC%89/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/03/07/%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/03/07/%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 wk<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>